{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst API_KEY = \"41829655-bf270f19af5dfab9e341d37e3\";\n\nconst cardContainer = document.querySelector(\".card-container\");\nconst searchForm = document.querySelector(\".search-form\");\nconst loader = document.querySelector(\".loader\");\n\nsearchForm.addEventListener(\"submit\", handleSearch);\n\nconst lightbox = new SimpleLightbox(\".card-container a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\nfunction handleSearch(event) {\n    event.preventDefault();\n  \n    const form = event.currentTarget;\n    const query = form.elements.query.value;\n  \n    if(!query.trim()) {\n        return;\n    }\n    \n    clearGallery()\n    showLoader();\n  \n      fetchPhotos(query)\n        .then(renderPhotos)\n        .catch(onFetchError)\n        .finally(() => {\n          form.reset();\n          hideLoader();\n        });\n  }\n\nfunction fetchPhotos(query) {\n  const url = `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  return fetch(url).then((response) => {\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    return response.json();\n  });\n}\n\nfunction renderPhotos(data) {\n  const photos = data.hits || [];\n\n  \n  if (photos.length === 0) {\n    onFetchError(new Error(\"No images found.\"));\n    return;\n  }\n  \n\n  const markup = photos\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `\n        <li class=\"gallery-item\">\n            <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                <img \n                class=\"gallery-image\" \n                src=\"${webformatURL}\" \n                alt=\"${tags}\"\n                width=\"360\" \n                height=\"200\"\n                />\n                <ul class=\"gallery-item-description\">\n                    <li class=\"comments\" >Likes: ${likes}</li>\n                    <li class=\"comments\" >Views: ${views}</li>\n                    <li class=\"comments\" >Downloads: ${downloads}</li>\n                    <li class=\"comments\" >Comments: ${comments}</li>\n                </ul>\n            </a>\n        </li>\n        `\n    )\n    .join(\"\");\n\n  cardContainer.innerHTML = markup;\n  lightbox.refresh();\n}\n\nfunction onFetchError(error) {\n  iziToast.show({\n    ...iziToastConfig,\n    backgroundColor: '#EF4040',\n    message: \"Sorry, there are no images matching your search query. Please try again!\",\n  });\n}\n\nfunction clearGallery() {\n  cardContainer.innerHTML = \"\";\n}\n\nfunction showLoader() {\n  loader.classList.add(\"visible\"); \n}\n\nfunction hideLoader() {\n  loader.classList.remove(\"visible\"); \n}\n\n\nconst iziToastConfig = {\n    position: 'topRight',\n    messageColor: '#FFF',\n    messageSize: \"16px\",\n    close: false,\n}\n\n"],"names":["API_KEY","cardContainer","searchForm","loader","handleSearch","lightbox","SimpleLightbox","event","form","query","clearGallery","showLoader","fetchPhotos","renderPhotos","onFetchError","hideLoader","url","response","data","photos","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","error","iziToast","iziToastConfig"],"mappings":"6vBAKA,MAAMA,EAAU,qCAEVC,EAAgB,SAAS,cAAc,iBAAiB,EACxDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAS,SAAS,cAAc,SAAS,EAE/CD,EAAW,iBAAiB,SAAUE,CAAY,EAElD,MAAMC,EAAW,IAAIC,EAAe,oBAAqB,CACvD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,SAASF,EAAaG,EAAO,CACzBA,EAAM,eAAc,EAEpB,MAAMC,EAAOD,EAAM,cACbE,EAAQD,EAAK,SAAS,MAAM,MAE9BC,EAAM,SAIVC,EAAc,EACdC,IAEEC,EAAYH,CAAK,EACd,KAAKI,CAAY,EACjB,MAAMC,CAAY,EAClB,QAAQ,IAAM,CACbN,EAAK,MAAK,EACVO,GACV,CAAS,EACN,CAEH,SAASH,EAAYH,EAAO,CAC1B,MAAMO,EAAM,gCAAgChB,OAAaS,4DAEzD,OAAO,MAAMO,CAAG,EAAE,KAAMC,GAAa,CACnC,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,UAAU,EAErC,OAAOA,EAAS,MACpB,CAAG,CACH,CAEA,SAASJ,EAAaK,EAAM,CAC1B,MAAMC,EAASD,EAAK,MAAQ,GAG5B,GAAIC,EAAO,SAAW,EAAG,CACvBL,EAA0C,EAC1C,MACD,CAGD,MAAMM,EAASD,EACZ,IACC,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IACvE;AAAA;AAAA,uBAEeL;AAAA;AAAA;AAAA,uBAGAD;AAAA,uBACAE;AAAA;AAAA;AAAA;AAAA;AAAA,mDAK4BC;AAAA,mDACAC;AAAA,uDACIE;AAAA,sDACDD;AAAA;AAAA;AAAA;AAAA,SAKjD,EACA,KAAK,EAAE,EAEVzB,EAAc,UAAYmB,EAC1Bf,EAAS,QAAO,CAClB,CAEA,SAASS,EAAac,EAAO,CAC3BC,EAAS,KAAK,CACZ,GAAGC,EACH,gBAAiB,UACjB,QAAS,0EACb,CAAG,CACH,CAEA,SAASpB,GAAe,CACtBT,EAAc,UAAY,EAC5B,CAEA,SAASU,GAAa,CACpBR,EAAO,UAAU,IAAI,SAAS,CAChC,CAEA,SAASY,GAAa,CACpBZ,EAAO,UAAU,OAAO,SAAS,CACnC,CAGA,MAAM2B,EAAiB,CACnB,SAAU,WACV,aAAc,OACd,YAAa,OACb,MAAO,EACX"}